# 快速启动指南

## 🚀 5 分钟快速上手

### 第一步：安装依赖

```bash
npm install
```

### 第二步：启动应用

```bash
npm start
```

### 第三步：访问应用

打开浏览器访问：**http://localhost:3000**

---

## 📋 默认账号

首次启动会自动创建管理员账号：

- **用户名**：admin
- **邮箱**：admin@example.com
- **密码**：admin123

---

## ✅ 功能测试清单

### 1. 用户注册流程测试

- [ ] 访问注册页面 http://localhost:3000/auth/register
- [ ] 输入用户名和邮箱
- [ ] 点击"发送验证码"
- [ ] 查看控制台获取验证码（如未配置邮箱）
- [ ] 输入验证码和密码
- [ ] 完成注册

### 2. 用户登录测试

- [ ] 访问登录页面 http://localhost:3000/auth/login
- [ ] 使用管理员账号登录
- [ ] 或使用注册的账号登录

### 3. 文件上传测试

- [ ] 登录后进入"我的文件"页面
- [ ] 点击"上传文件"按钮
- [ ] 选择一个文本文件（如 .txt 或 .md）
- [ ] 可选：勾选"公开此文件"
- [ ] 点击上传

### 4. 文件查看测试

- [ ] 在文件列表点击"查看"按钮
- [ ] 查看文件内容
- [ ] 测试下载功能
- [ ] 测试删除功能

### 5. 公共资源测试

- [ ] 访问"公共资源"页面
- [ ] 查看公开的文件
- [ ] 测试查看和下载

### 6. 管理后台测试（需管理员账号）

- [ ] 使用管理员账号登录
- [ ] 访问"后台管理"
- [ ] 查看系统统计
- [ ] 进入"用户管理"查看所有用户
- [ ] 进入"文件管理"查看所有文件
- [ ] 测试删除文件功能

---

## 📧 配置邮箱（可选）

如果需要真实发送验证码邮件，编辑 `.env` 文件：

```env
# 使用 QQ 邮箱示例
EMAIL_USER=your_email@qq.com
EMAIL_PASS=your_authorization_code
```

### QQ 邮箱配置步骤：

1. 登录 QQ 邮箱网页版
2. 进入 **设置** → **账户**
3. 找到 **POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV 服务**
4. 开启服务并生成**授权码**
5. 将邮箱和授权码填入 `.env` 文件

**注意**：使用授权码而不是登录密码！

---

## 🎯 测试场景

### 场景 1：普通用户使用

1. 注册新账号
2. 上传私有文件
3. 上传公开文件
4. 在"我的文件"中管理文件
5. 在"公共资源"中查看其他用户分享的文件

### 场景 2：管理员使用

1. 使用管理员账号登录
2. 查看系统统计数据
3. 管理所有用户
4. 管理所有文件（包括删除）
5. 监控系统使用情况

---

## 🐛 常见问题排查

### 问题 1：端口被占用

**错误信息**：`Error: listen EADDRINUSE: address already in use :::3000`

**解决方法**：

```bash
# 修改 .env 文件中的端口
PORT=3001
```

### 问题 2：无法发送验证码邮件

**症状**：点击发送验证码后提示失败

**排查步骤**：

1. 检查 `.env` 中的邮箱配置是否正确
2. 确认使用的是授权码而不是登录密码
3. 查看控制台错误信息
4. 不配置邮箱时，验证码会在控制台显示（开发模式）

### 问题 3：文件上传失败

**可能原因**：

- 文件格式不支持
- 文件过大（限制 10MB）

**解决方法**：

- 确保上传支持的文件格式
- 检查文件大小

---

## 📁 支持的文件格式

当前支持以下文本文件格式：

- .txt
- .md
- .cpp
- .py
- .js
- .html
- .css
- .json
- .xml
- .java
- .c
- .h
- .cs

可在 `utils/upload.js` 中修改 `ALLOWED_EXTENSIONS` 添加更多格式。

---

## 🔧 开发模式

使用 nodemon 自动重启：

```bash
npm run dev
```

---

## 📝 项目文件说明

- `app.js` - 主应用入口
- `config/` - 配置文件
- `controllers/` - 业务逻辑
- `routes/` - 路由定义
- `middlewares/` - 中间件
- `models/` - 数据模型
- `views/` - 页面模板
- `utils/` - 工具函数
- `data/` - 数据存储（自动生成）
- `storage/` - 文件存储（自动生成）

详细说明请查看 `PROJECT_STRUCTURE.md`

---

## 🔐 安全提醒

⚠️ **生产环境部署前必须修改**：

1. **修改 SESSION_SECRET**

   ```env
   SESSION_SECRET=使用强随机字符串替换
   ```

2. **修改管理员密码**

   ```env
   ADMIN_PASSWORD=使用强密码替换
   ```

3. **配置 HTTPS**

4. **使用真实数据库**（当前使用 JSON 文件）

---

## 📚 更多资源

- [完整文档](README.md)
- [项目结构说明](PROJECT_STRUCTURE.md)
- [Node.js 官方文档](https://nodejs.org/)
- [Express 官方文档](https://expressjs.com/)

---

## 💡 提示

- 开发模式下，验证码会在控制台显示
- 可以同时使用多个浏览器测试多用户场景
- 管理员可以删除任何用户的文件
- 公开文件所有登录用户都可以查看

---

**祝您使用愉快！** 🎉

如有问题，请查看控制台日志或联系开发者。
